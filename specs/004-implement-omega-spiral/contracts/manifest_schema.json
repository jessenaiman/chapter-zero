{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://omega-spiral.dev/contracts/manifest_schema.json",
  "title": "Game Manifest Schema",
  "description": "JSON schema for the main game manifest that registers all scenes and their metadata",
  "type": "object",
  "properties": {
    "gameName": { "type": "string", "minLength": 3, "maxLength": 50, "description": "Display name of the game" },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Game version in semantic versioning format"
    },
    "description": { "type": "string", "minLength": 10, "maxLength": 500, "description": "Brief description of the game" },
    "scenes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "integer", "minimum": 1, "maximum": 10, "description": "Unique scene identifier" },
          "type": {
            "type": "string",
            "enum": [ "narrative_terminal", "ascii_dungeon_sequence", "wizardry_party", "tile_dungeon", "pixel_combat" ],
            "description": "Scene type"
          },
          "name": { "type": "string", "minLength": 5, "maxLength": 50, "description": "Display name for the scene" },
          "path": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+/?$", "description": "Directory path containing scene data files" },
          "supportsThreads": { "type": "boolean", "description": "Whether this scene supports Dreamweaver thread variations" },
          "requiredScenes": {
            "type": "array",
            "items": { "type": "integer", "minimum": 1, "maximum": 10 },
            "description": "Scene IDs that must be completed before this scene"
          },
          "sceneFile": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+\\.tscn$", "description": "Godot scene file for this scene type" }
        },
        "required": [ "id", "type", "name", "path", "supportsThreads", "sceneFile" ]
      },
      "minItems": 5,
      "maxItems": 5,
      "description": "Registry of all game scenes in execution order"
    },
    "defaultScene": { "type": "integer", "minimum": 1, "maximum": 5, "description": "Scene ID to load when starting new game" },
    "gameSettings": {
      "type": "object",
      "properties": {
        "resolution": {
          "type": "object",
          "properties": {
            "width": { "type": "integer", "minimum": 800, "maximum": 1920 },
            "height": { "type": "integer", "minimum": 600, "maximum": 1080 }
          },
          "description": "Default game resolution"
        },
        "targetFPS": { "type": "integer", "minimum": 30, "maximum": 120, "default": 60, "description": "Target frames per second" },
        "vsync": { "type": "boolean", "default": true, "description": "Enable vertical synchronization" }
      },
      "description": "Game-wide settings and configuration"
    }
  },
  "required": [
    "gameName",
    "version",
    "scenes",
    "defaultScene"
  ]
}
