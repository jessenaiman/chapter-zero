{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://omega-spiral.dev/contracts/scene5_ff_combat_schema.json",
  "title": "Final Fantasy Combat Schema",
  "description": "JSON schema for turn-based pixel art combat system data",
  "type": "object",
  "properties": {
    "type": { "type": "string", "enum": [ "pixel_combat" ], "description": "Scene type identifier" },
    "playerSprite": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+\\.(png|tres)$", "description": "Path to player character sprite file" },
    "enemy": {
      "type": "object",
      "properties": {
        "name": { "type": "string", "minLength": 3, "maxLength": 50, "description": "Display name of the enemy" },
        "hp": { "type": "integer", "minimum": 20, "maximum": 200, "description": "Enemy's hit points" },
        "maxHp": { "type": "integer", "minimum": 20, "maximum": 200, "description": "Enemy's maximum hit points" },
        "attack": { "type": "integer", "minimum": 5, "maximum": 50, "description": "Enemy's attack power" },
        "defense": { "type": "integer", "minimum": 0, "maximum": 20, "description": "Enemy's defense value" },
        "sprite": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+\\.(png|tres)$", "description": "Path to enemy sprite file" },
        "attackPatterns": {
          "type": "array",
          "items": { "type": "string", "minLength": 5, "maxLength": 100, "description": "Description of enemy attack pattern" },
          "minItems": 1,
          "maxItems": 5,
          "description": "Variety of enemy attack descriptions"
        }
      },
      "required": [ "name", "hp", "maxHp", "attack", "defense", "sprite" ]
    },
    "actions": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [ "FIGHT", "MAGIC", "ITEM", "RUN", "ATTACK", "SPELL", "SUMMON", "DEFEND" ],
        "description": "Available combat actions"
      },
      "minItems": 3,
      "maxItems": 4,
      "description": "List of available combat actions for this encounter"
    },
    "spells": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "minLength": 3, "maxLength": 20, "description": "Spell name" },
          "mpCost": { "type": "integer", "minimum": 5, "maximum": 50, "description": "Magic point cost to cast" },
          "effect": { "type": "string", "enum": [ "damage", "heal", "buff", "debuff" ], "description": "Type of spell effect" },
          "power": { "type": "integer", "minimum": 10, "maximum": 100, "description": "Spell power/effectiveness" },
          "description": { "type": "string", "minLength": 10, "maxLength": 100, "description": "Spell description" }
        },
        "required": [ "name", "mpCost", "effect", "power" ],
        "description": "Available spells for magic combat"
      },
      "description": "Optional spell list if MAGIC action is available"
    },
    "items": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "minLength": 3, "maxLength": 20, "description": "Item name" },
          "effect": { "type": "string", "enum": [ "heal", "buff", "damage", "escape" ], "description": "Item effect type" },
          "power": { "type": "integer", "minimum": 10, "maximum": 100, "description": "Item effectiveness" },
          "count": { "type": "integer", "minimum": 1, "maximum": 10, "description": "Number of this item available" }
        },
        "required": [ "name", "effect", "power", "count" ],
        "description": "Available items for ITEM action"
      },
      "description": "Optional item list if ITEM action is available"
    },
    "music": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+\\.(ogg|wav|mp3)$", "description": "Path to combat music file" },
    "victoryText": { "type": "string", "minLength": 10, "maxLength": 300, "description": "Text displayed on combat victory" },
    "defeatText": { "type": "string", "minLength": 10, "maxLength": 300, "description": "Text displayed on combat defeat" },
    "difficulty": {
      "type": "string",
      "enum": [ "easy", "normal", "hard", "boss" ],
      "default": "normal",
      "description": "Combat difficulty level"
    }
  },
  "required": [
    "type",
    "playerSprite",
    "enemy",
    "actions",
    "music",
    "victoryText"
  ]
}
