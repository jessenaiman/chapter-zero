[gd_scene load_steps=16 format=3 uid="uid://stage4_main_unique"]

[ext_resource type="Script" uid="uid://m3oktjc6gmsb" path="res://source/scripts/field/Field.cs" id="1"]
[ext_resource type="PackedScene" uid="uid://d2lj4blu56fte" path="res://source/scripts/field/gamepieces/controllers/PlayerController.tscn" id="2"]
[ext_resource type="Script" uid="uid://drugj534rnwxw" path="res://source/scripts/field/Map.cs" id="3"]
[ext_resource type="TileSet" uid="uid://biq84075xlypd" path="res://source/overworld/maps/tilesets/kenney_terrain.tres" id="4"]
[ext_resource type="PackedScene" uid="uid://b626e0bngfvjj" path="res://source/scripts/field/gamepieces/gamepiece.tscn" id="5"]
[ext_resource type="PackedScene" uid="uid://cdkha7cc72h35" path="res://source/overworld/characters/generic_character_gfx.tscn" id="6"]
[ext_resource type="PackedScene" uid="uid://se1wnxu5svgj" path="res://source/overworld/characters/knight_gfx.tscn" id="7"]
[ext_resource type="PackedScene" uid="uid://dqdk6eehxsrmn" path="res://source/overworld/characters/monk_gfx.tscn" id="8"]
[ext_resource type="PackedScene" uid="uid://kiwma43jc3n6" path="res://source/overworld/characters/thief_gfx.tscn" id="9"]
[ext_resource type="PackedScene" uid="uid://bvtk5qllej4b8" path="res://source/overworld/characters/smith_gfx.tscn" id="10"]
[ext_resource type="PackedScene" uid="uid://ccm8tsjysf8b5" path="res://source/overworld/characters/wizard_gfx.tscn" id="11"]
[ext_resource type="PackedScene" uid="uid://oot0x5n44b2r" path="res://source/scripts/field/cutscenes/Interaction.tscn" id="12"]
[ext_resource type="Script" uid="uid://c0g1jsnegpvtq" path="res://source/scripts/field/ui/DialogueWindow.cs" id="13"]
[ext_resource type="FontFile" uid="uid://cfhyd5hmym1s4" path="res://assets/gui/font/Kenney Pixel.ttf" id="14"]
[ext_resource type="Resource" uid="uid://c5gfpb2ghma5w" path="res://source/overworld/maps/town/smith.dtl" id="15"]
[ext_resource type="Resource" uid="uid://b6cc3gmd8nlty" path="res://source/overworld/maps/town/thief.dtl" id="16"]
[ext_resource type="Resource" uid="uid://cu4um6ppwmk03" path="res://source/overworld/maps/town/monk.dtl" id="17"]
[ext_resource type="Resource" uid="uid://vbo7p1nxgkrv" path="res://source/overworld/maps/town/wizard.dtl" id="18"]
[ext_resource type="Script" uid="uid://ht3xm51xvouh" path="res://source/scripts/field/gamepieces/controllers/GamepieceController.cs" id="19"]
[ext_resource type="PackedScene" uid="uid://cubp81mykng3h" path="res://source/scripts/field/cutscenes/popups/InteractionPopup.tscn" id="20"]
[ext_resource type="PackedScene" uid="uid://ctuol1ff8u5e2" path="res://source/scripts/field/cutscenes/templates/treasure_chests/TreasureChest.tscn" id="21"]
[ext_resource type="PackedScene" uid="uid://wivtmf75ic3f" path="res://source/overworld/maps/town/battles/test_combat_arena.tscn" id="22"]
[ext_resource type="Script" uid="uid://cstx0ojahlkxk" path="res://source/overworld/maps/forest/GameEndTrigger.cs" id="23"]
[ext_resource type="Script" uid="uid://dstlv1xykju5l" path="res://source/overworld/maps/OpeningCutscene.cs" id="24"]
[ext_resource type="Script" uid="uid://ccow10kcmjj04" path="res://source/overworld/maps/town/GangOfFourConversation.cs" id="25"]
[ext_resource type="Script" uid="uid://b2vp0gl62wukl" path="res://source/overworld/maps/town/FanInteraction.cs" id="26"]
[ext_resource type="Script" uid="uid://b3pc7s5n03m85" path="res://source/overworld/maps/town/StrangeTreeInteraction.cs" id="27"]
[ext_resource type="Script" uid="uid://dlr1qymr1i4e" path="res://source/overworld/maps/town/DoorUnlockInteraction.cs" id="28"]
[ext_resource type="Resource" uid="uid://dhllga88kmxrs" path="res://source/overworld/maps/town/sign.dtl" id="29"]
[ext_resource type="PackedScene" uid="uid://bd624fi8r2avm" path="res://source/scripts/field/cutscenes/templates/area_transitions/AreaTransition.tscn" id="30"]
[ext_resource type="Script" uid="uid://biiqi2vvuyjy0" path="res://source/scripts/field/cutscenes/templates/combat/RoamingCombatTrigger.cs" id="31"]
[ext_resource type="PackedScene" uid="uid://p0e4b0txynkd" path="res://source/scripts/field/cutscenes/templates/doors/Door.tscn" id="32"]
[ext_resource type="PackedScene" uid="uid://chgku8dii7mu8" path="res://source/scripts/field/cutscenes/templates/pickups/Pickup.tscn" id="33"]
[ext_resource type="Resource" uid="uid://cdtwlcd2d6q07" path="res://source/overworld/maps/town/strange_tree.dtl" id="34"]
[ext_resource type="PackedScene" uid="uid://cgwailb13nkcd" path="res://source/overworld/characters/ghost_gfx.tscn" id="35"]
[ext_resource type="Resource" uid="uid://gcpgk7rnyguj" path="res://source/overworld/maps/town/encounter_before_combat.dtl" id="36"]
[ext_resource type="Resource" uid="uid://dmmexun61mw4j" path="res://source/overworld/maps/town/encounter_on_victory.dtl" id="37"]
[ext_resource type="Resource" uid="uid://c4ns5mfdjc11e" path="res://source/overworld/maps/town/encounter_on_loss.dtl" id="38"]
[ext_resource type="Script" uid="uid://jka4efg1wci6" path="res://source/scripts/field/cutscenes/templates/conversations/ConversationTemplate.cs" id="39"]
[ext_resource type="Script" uid="uid://b3pc7s5n03m85" path="res://source/overworld/maps/town/StrangeTreeInteraction.cs" id="40"]
[ext_resource type="PackedScene" uid="uid://bvtk5qllej4b8" path="res://source/overworld/characters/smith_gfx.tscn" id="41"]
[ext_resource type="PackedScene" uid="uid://cgwailb13nkcd" path="res://source/overworld/characters/ghost_gfx.tscn" id="42"]
[ext_resource type="Script" uid="uid://cmtpjnqderv2u" path="res://source/scripts/field/cutscenes/popups/MovingInteractionPopup.cs" id="43"]
[ext_resource type="Script" uid="uid://dreamweaver_presence_controller_unique" path="res://source/stages/stage_4/DreamweaverPresenceController.cs" id="44"]

[node name="Stage4Main" type="Node2D"]
script = ExtResource("1")

[node name="Gameboard" type="Node" parent="."]
visible = false

[node name="GameboardLayer" type="Node" parent="Gameboard"]
script = ExtResource("55_a8sfs")

[node name="GameboardProperties" type="Resource" parent="Gameboard"]
script = ExtResource("24")

[node name="TileMap" type="TileMap" parent="Gameboard"]
tile_set = ExtResource("4")
cell_size = Vector2(16, 16)

[node name="Gamepieces" type="Node" parent="Gameboard"]

[node name="Player" type="Node" parent="Gameboard/Gamepieces"]
script = ExtResource("5")
position = Vector2(80, 80)

[node name="PlayerController" type="Node" parent="Gameboard/Gamepieces/Player"]
scene = ExtResource("2")
script = ExtResource("19")

[node name="UI" type="Control" parent="."]

[node name="DialogueWindow" type="Control" parent="UI"]
script = ExtResource("13")

[node name="InteractionPopup" type="Control" parent="UI"]
scene = ExtResource("20")
visible = false

[node name="DebugInfo" type="Label" parent="UI"]
text = "Stage 4: Liminal Township"
size = Vector2(300, 50)
position = Vector2(10, 10)

[node name="AreaTransitions" type="Node" parent="."]
visible = false

[node name="Interactions" type="Node" parent="."]
visible = false

[node name="Cutscenes" type="Node" parent="."]
visible = false

[node name="DreamweaverPresences" type="Node2D" parent="."]
script = ExtResource("44")
visible = true