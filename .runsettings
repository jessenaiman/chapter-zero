<?xml version="1.0" encoding="utf-8"?>
<!--
    GdUnit4Net Test Configuration for Omega Spiral

    This configuration file provides settings for test execution using GdUnit4Net,
    the VSTest-compatible testing framework for Godot C# projects.

    Documentation: https://mikeschulze.github.io/gdUnit4/csharp_project_setup/vstest-adapter/
-->
<RunSettings>
    <!-- Test Execution Configuration -->
    <RunConfiguration>
        <!-- Run tests sequentially (required for Godot runtime tests) -->
        <MaxCpuCount>1</MaxCpuCount>
        <TestAdaptersPaths>.</TestAdaptersPaths>
        <ResultsDirectory>./TestResults</ResultsDirectory>

        <!-- Timeout for entire test session (30 minutes) -->
        <TestSessionTimeout>1800000</TestSessionTimeout>

        <!-- Fail build if no tests are found -->
        <TreatNoTestsAsError>true</TreatNoTestsAsError>

        <EnvironmentVariables>
            <!-- Path to Godot executable (required for [RequireGodotRuntime] tests) -->
            <GODOT_BIN>/home/adam/Godot_v4.6-dev2_mono_linux_x86_64/Godot_v4.6-dev2_mono_linux.x86_64</GODOT_BIN>
            <DEBUG_MODE>true</DEBUG_MODE>

            <!-- Project root path for Godot -->
            <PROJECT_PATH>/home/adam/Dev/omega-spiral/chapter-zero</PROJECT_PATH>
        </EnvironmentVariables>
    </RunConfiguration>

    <!-- Test Result Loggers -->
    <LoggerRunSettings>
        <Loggers>
            <!-- Console logger for terminal output -->
            <Logger friendlyName="console" enabled="True">
                <Configuration>
                    <!-- Verbosity: quiet, minimal, normal, detailed, diagnostic -->
                    <Verbosity>detailed</Verbosity>
                </Configuration>
            </Logger>

            <!-- HTML logger for human-readable reports -->
            <Logger friendlyName="html" enabled="True">
                <Configuration>
                    <LogFileName>test-result.html</LogFileName>
                </Configuration>
            </Logger>

            <!-- TRX logger for CI/CD integration -->
            <Logger friendlyName="trx" enabled="True">
                <Configuration>
                    <LogFileName>TestResults/test-result.trx</LogFileName>
                </Configuration>
            </Logger>
        </Loggers>
    </LoggerRunSettings>

    <GdUnit4>
        <!-- Additional Godot runtime parameters. These are passed to the Godot executable when running tests.-->
        <Parameters>"--verbose"</Parameters>
  
        <!-- Controls the display name format of test cases in the test results.
                 Allowed values:
                 - SimpleName: Uses only the method name (e.g., "TestMethod")
                 - FullyQualifiedName: Uses the full path including class and method name (e.g., "MyNamespace.MyClass.TestMethod")
                 Default: SimpleName -->
        <DisplayName>FullyQualifiedName</DisplayName>
  
        <!-- When set to true, standard output (stdout) from test cases is captured
                 and included in the test result. This can be useful for debugging. -->
        <CaptureStdOut>true</CaptureStdOut>
  
        <!-- The maximum duration allowed for a Godot project compilation process in milliseconds.
                          After this timeout period expires, the compilation process is forcefully terminated.
                          For large or complex Godot projects, you may need to increase this value.
                          Default: 20000 (20 seconds) -->
         <CompileProcessTimeout>60000</CompileProcessTimeout>
    </GdUnit4>
</RunSettings>
